# C++ Module 07 - Templates

## 概要

C++ Module 07では、C++の強力な機能である**テンプレート（Templates）**を学びます。

- **関数テンプレート**: 型に依存しない汎用的な関数の作成
- **クラステンプレート**: 型に依存しない汎用的なクラスの作成
- **テンプレートの特殊化**: 特定の型に対する特別な実装

このモジュールを通じて、C++のジェネリックプログラミングの基礎を習得し、再利用可能で効率的なコードを書けるようになります。

---

## ルール

- C++98準拠で開発すること
- `-Wall -Wextra -Werror -std=c++98` オプションを用いてコンパイル
- STLの使用は禁止（Module 08以降のみ許可）
- `printf`, `malloc`, `free` などのC関数は禁止
- `using namespace` や `friend` の使用も禁止
- テンプレートの実装は `.hpp` ファイルに記述すること

---

## 各課題の概要

### ex00 - A few functions

**概要**:  
基本的な関数テンプレートを実装し、テンプレートの基本概念を理解する。

**実装内容**:
- `swap(T& a, T& b)`: 2つの値を交換する関数テンプレート
- `min(const T& a, const T& b)`: 2つの値の最小値を返す関数テンプレート
- `max(const T& a, const T& b)`: 2つの値の最大値を返す関数テンプレート

**技術的ポイント**:
- テンプレートパラメータの宣言
- 参照による効率的な値の受け渡し
- 定数参照による不要なコピーを避ける
- テンプレート関数のインスタンス化

---

### ex01 - Iter

**概要**:  
配列の各要素に対して関数を適用する汎用的な関数テンプレートを実装。

**実装内容**:
- `iter(T* array, size_t length, void (*func)(T&))`: 非const配列用
- `iter(const T* array, size_t length, void (*func)(const T&))`: const配列用
- 関数ポインタを受け取り、配列の各要素に適用

**技術的ポイント**:
- 関数ポインタのテンプレート化
- const修飾子の適切な扱い
- 配列の境界チェック
- 汎用的なイテレーション機能

---

### ex02 - Array

**概要**:  
動的配列を管理するクラステンプレートを実装し、STLの `std::vector` の簡易版を作成。

**実装内容**:
- `Array<T>` クラステンプレート
- 動的メモリ確保と解放
- コピーコンストラクタと代入演算子（ディープコピー）
- 添字演算子 `operator[]` のオーバーロード
- 例外処理（範囲外アクセス時の `std::exception` の派生クラス）

**技術的ポイント**:
- クラステンプレートの定義と実装
- 動的メモリ管理（`new[]` / `delete[]`）
- 例外安全性の確保
- テンプレートの実装ファイル（`.tpp`）の分離
- 添字演算子のconst/非const版の両方実装

---

## 技術的詳細

### 関数テンプレート

```cpp
template<typename T>
void swap(T& a, T& b) {
    T temp = a;
    a = b;
    b = temp;
}
```

- `template<typename T>` でテンプレートパラメータを宣言
- 型 `T` は使用時に自動的に推論される
- コンパイル時に各型に対して専用の関数が生成される

### クラステンプレート

```cpp
template<typename T>
class Array {
private:
    T* _elements;
    unsigned int _size;
public:
    Array(unsigned int n);
    // ... その他のメンバ関数
};
```

- クラス全体をテンプレート化
- メンバ関数も自動的にテンプレート化される
- 実装は `.tpp` ファイルに分離することが推奨

### テンプレートの実装分離

C++98では、テンプレートの実装をヘッダファイルに含める必要があります：

```cpp
// Array.hpp
template<typename T>
class Array {
    // 宣言のみ
};

#include "Array.tpp"  // 実装をインクルード
```

---

## ビルドと実行方法

各課題はそれぞれのディレクトリにあり、独自のMakefileが含まれています。

### ex00 - A few functions

```bash
cd ex00
make
./whatever
```

### ex01 - Iter

```bash
cd ex01
make
./iter
```

### ex02 - Array

```bash
cd ex02
make
./array
```

---

## テンプレートの利点

1. **型安全性**: コンパイル時に型チェックが行われる
2. **コードの再利用**: 同じロジックを異なる型で使用可能
3. **パフォーマンス**: インライン展開によりオーバーヘッドが最小
4. **柔軟性**: 任意の型に対して動作する汎用的なコード

---

## 注意事項

- テンプレートの実装は使用される型に対して有効でなければならない
- テンプレートのインスタンス化はコンパイル時に行われる
- テンプレートのエラーメッセージは複雑になりがち
- テンプレートの実装はヘッダファイルに含める必要がある（C++98）

---

## 学習目標

このモジュールを通じて以下を習得します：

1. **テンプレートの基本概念**: 型に依存しない汎用的なコードの書き方
2. **関数テンプレート**: 汎用的な関数の実装方法
3. **クラステンプレート**: 汎用的なクラスの実装方法
4. **テンプレートの実装分離**: ヘッダと実装の適切な分離
5. **例外処理**: テンプレートクラスでのエラーハンドリング